{% extends "base.html" %}

{% block title %}Персонажи Гарри Поттера{% endblock %}

{% block content %}
<h2>Персонажи Гарри Поттера</h2>

{% if not session.username %}
<div class="notice">
    <p>Сначала зарегистрируйтесь, чтобы смотреть карточки персонажей.</p>
    <a href="{{ url_for('create_profile') }}" class="btn">Зарегистрироваться</a>
</div>
{% else %}
<div class="characters-grid">
    {% for character in characters %}
    <button class="character-card" data-target="article-{{ character.id }}">
        <h3>{{ character.name }}</h3>
        <p>{{ character.short }}</p>
    </button>
    {% endfor %}
</div>

<div class="character-articles">
    {% for character in characters %}
    <article id="article-{{ character.id }}" class="character-article" hidden>
        <h3>{{ character.name }}</h3>
        <p>{{ character.article }}</p>
    </article>
    {% endfor %}
</div>

<script>
    const cards = document.querySelectorAll('.character-card');
    const articles = document.querySelectorAll('.character-article');

    cards.forEach((card) => {
        card.addEventListener('click', () => {
            const targetId = card.dataset.target;

            articles.forEach((article) => {
                article.hidden = article.id !== targetId;
            });
        });
    });
</script>
{% endif %}
{% endblock %}
